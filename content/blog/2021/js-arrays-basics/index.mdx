---
title: Introducción al Array de JavaScript
date: 2021-09-20
description: Durante los últimos 5 años los arrays en JavaScript han experimentado muchas mejoras. Te muestro algunas de ellas en esta entrada.
tags: [javascript, arrays, basics]
cover: ./js-arrays-basic.png
draft: true
---

```toc
```

## ¿Qué es un array?

En JavaScript los arrays son objetos que contienen una lista de valores con métodos para poder recorrerla, mutarla o generar nuevas listas. Tanto su longitud como el tipo de elementos que contiene es variable.

## Cómo crear un array
Un array se puede crear de diferentes maneras:

### Expresando el array
Directamente expresando el array con los valores que queramos incluir. También al tener longitud variable podemos instanciarlo vacío para posteriormente rellenarlo, ya que el rellenarlo su longitud irá aumentando.

<JavaScriptRepl
  title="Expresando un array"
  init={[
    "const food = ['pizza', 'sandwich']",
    "const emptyArray = []",
    "emptyArray.length"
  ]}
/>

### Usando el constructor Array
El constructor de Array se comporta de una manera u otra dependiendo del número y tipo de parámetros que reciba, en otras palabras, está sobrecargado. Si le pasamos sólo un parámetro y este parámetro es un número, entonces instanciará un Array con la longitud del número que le hayamos pasado y todos sus posiciones estarán vacías.

En caso de que le pasemos más de un parámetro o si el único parámetro que le pasamos no es un número, instanciará un nuevo array con los elementos que le hemos pasado y su longitud será igual al número de parámetros que le hemos pasado. Por cierto, usar la palabra reservada ***new* es completamente opcional**.

<JavaScriptRepl
  title="Usando el constructor Array"
  init={[
    "const numberArray = new Array(5)",
    "const stringArray = new Array('foo')",
    "const fibonacciNumbers = new Array(1,1,2,3,5,8,13)"
  ]}
/>

### Array.from

Este método fue introducido en ES2015 y funciona a modo de factoría convirtiendo iterables y cosas parecidas a un array (también conocidos como array-like objects) como los NodeList a un array para poder usar sus métodos y trabajar con ellos con mayor comodidad. Otro ejemplo de array-like objects son los iterables como por ejemplo el String, Map o Set.

<JavaScriptRepl
  title="Array.from"
  init={[
    "const mapExample = new Map().set('first',1).set('second',2)",
    "Array.from(mapExample)",
    "Array.from(mapExample.values())",
    "Array.from('Hola!')",
    "Array.from(new Set([1,2,3,4,5,4,3,2,1]))",
  ]}
/>

Un array no deja de ser un objeto con una propiedad `length` y claves numéricas para los índices, por lo que no es tan extraño pensar que puedes hacer esto con `Array.from`:

<JavaScriptRepl
  title="Array.from"
  init={[
    "Array.from({length: 4, 0: 'foo'})",
  ]}
/>

### Array.of

Funciona exactamente igual que el constructor Array, pero con una sutil diferencia: cuando le pasas un número como único argumento en vez de crear un array con una longitud igual al número dado, creará un array con ese número como único elemento.

<JavaScriptRepl
  title="Array.of"
  init={[
    "const numberArray = Array.of(5)",
    "const stringArray = Array.of('foo')",
    "const fibonacciNumbers = Array.of(1,1,2,3,5,8,13)"
  ]}
/>

## Destructuring

El concepto de *destructuring* (en español sería algo así como *desestructurar*) es algo que vino con ES2015 y que no aplica sólo a arrays, sino también a objetos. Centrándonos en los arrays, el destructuring permite

## La mutabilidad del array en JavaScript

Un array puede ser mutado tanto en su longitud como en sus valores.

<JavaScriptRepl
  title="Mutando la longitud de un array"
  init={[
    "const array = []",
    "array[0] = 1",
    "array",
    "array[4] = 5",
    "array",
    "array.length",
    "array.length = 0",
    "array",
    "array.length",
  ]}
/>

Como has podido ver en el último caso, si alteras la propiedad length puedes incluso borrar el contenido del array. Para hacer un array inmutable deberíamos *congelarlo* con el método estático `Object.freeze`

<JavaScriptRepl
  title="Haciendo un array inmutable"
  init={[
    "const array = Object.freeze(Array(1,2,3,4))",
    "array.push(5)",
    "array[0] = 0",
    "array.length = 0",
    "array"
  ]}
/>

También existen métodos del prototipo Array que mutan el contenido del array:
- [copyWithin](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/copyWithin): copia una parte del array en otra posición modificando los elementos, pero no su longitud.
- [fill](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/fill): asigna un valor a todos los elementos de un array.
- [pop](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/pop): elimina el último elemento de un array y lo devuelve.
- [push](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/push): añade uno o varios elementos al final del array y devuelve la nueva longitud del array.
- [reverse](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse): invierte el orden del array.
- [shift](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/shift): elimina el primer elemento de un array y lo devuelve.
- [sort](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/sort): ordena el array.
- [splice](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/splice):
- [unshift](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift): añade uno o varios elementos al principio del array y devuelve la nueva longitud del array.

## Cómo clonar un array en JavaScript

En más de una ocasión querrás trabajar con un array, pero sin mutar la copia original, por lo que tendrás que hacer una copia o clonarlo. Existen varias formas de hacerlo:

### Usando Array.from

Como habíamos visto a la hora de crear un array se puede usar Array.from, ya que acepta cualquier cosa que se parezca a un array y crea una nueva instancia del mismo.

```js
const array = [1, 2, 3, 4, 5]
const array2 = Array.from(array)

array2[0] = 'foo'

console.table({'Array original': array, 'Array clonado': array2})
/**
┌────────────────┬───────┬───┬───┬───┬───┐
│    (index)     │   0   │ 1 │ 2 │ 3 │ 4 │
├────────────────┼───────┼───┼───┼───┼───┤
│ Array original │   1   │ 2 │ 3 │ 4 │ 5 │
│ Array clonado  │ 'foo' │ 2 │ 3 │ 4 │ 5 │
└────────────────┴───────┴───┴───┴───┴───┘
*/

const array3 = array

array3[0] = 'bar'

console.table({'Array original': array, 'Array copiado': array3})
/**
┌────────────────┬───────┬───┬───┬───┬───┐
│    (index)     │   0   │ 1 │ 2 │ 3 │ 4 │
├────────────────┼───────┼───┼───┼───┼───┤
│ Array original │ 'bar' │ 2 │ 3 │ 4 │ 5 │
│ Array copiado  │ 'bar' │ 2 │ 3 │ 4 │ 5 │
└────────────────┴───────┴───┴───┴───┴───┘
*/
```
La diferencia entre *array2* y *array3* es que *array2* se crea a partir de una nueva instancia de Array basándose en *array*, mientras que *array3* copia la referencia en memoria de *array*. De esta manera, cualquier mutación en *array3* hará que *array* mute también y viceversa.

### Rest operator


## Métodos básicos

### Array.some
### Array.every
### Array.map
### Array.filter
### Array.reduce
### Array.at

## Formas de recorrer un array

### for

El clásico

### forEach

### for of
Esta forma de recorrer arrays (realmente recorre iterables, pero eso lo explicaré otro artículo) llegó con ES2015 y hace muy cómodo recorrer listas de valores.

### Comparativa con benchmark




